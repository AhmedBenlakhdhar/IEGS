/* static/css/custom.css - UPDATED for v2.0 Rating System */

/* 1. Variables and Base */
:root {
  /* DARK THEME (Default) */
  --bg-primary: #111318;
  --bg-element: #1a1d24;
  --bg-element-lighter: #20232a;
  --bg-tertiary: #252a33;
  --text-primary: #e8eaf6;
  --text-secondary: #9fa8da;
  --text-tertiary: #5f687e;
  --accent-primary: #00ffaa;
  --accent-hover: #00e699;
  --highlight-gold: #ffc107;
  --border-color: #303440;
  --border-lighter: #404552;
  --shadow-color: rgba(0, 0, 0, 0.3);
  --input-focus-glow: rgba(0, 255, 170, 0.15);

  --link-color: #3399ff;
  --link-hover-color: #66ccff;
  --link-switch-color: var(--link-color);
  --link-switch-hover: var(--link-hover-color);

  /* Rating Tier Colors (Keep names consistent) */
  --rating-halal: #00e676;    /* HAL */
  --rating-mashbouh: #ffc107; /* MSH */
  --rating-haram: #ff7171;    /* HRM */
  --rating-kufr: #9e93fc;     /* KFR */
  --rating-HAL: var(--rating-halal);
  --rating-MSH: var(--rating-mashbouh);
  --rating-HRM: var(--rating-haram);
  --rating-KFR: var(--rating-kufr);

  /* NEW Severity Colors & Variables */
  --severity-n-color: #9e9e9e; /* Grey for None */
  --severity-l-color: var(--rating-halal); /* Green for Mild */
  --severity-m-color: var(--rating-mashbouh); /* Yellow/Amber for Moderate */
  --severity-s-color: var(--rating-haram); /* Red for Severe (Replaces H/P) */

  /* Alert/Warning styles */
  --rating-mashbouh-text: var(--bg-primary);
  --alert-warning-bg: var(--highlight-gold);
  --alert-warning-text: var(--bg-primary);
  --alert-warning-border: color-mix(in srgb, var(--highlight-gold) 80%, black);

  --font-primary: 'Inter', sans-serif;
  --font-heading: 'Montserrat', sans-serif;
  --font-heading-weight: 800;
  --font-body-weight: 400;
}

/* LIGHT THEME Variables */
body.light-mode {
  --bg-primary: #f8f9fa;
  --bg-element: #ffffff;
  --bg-element-lighter: #f1f3f5;
  --bg-tertiary: #e9ecef;
  --text-primary: #212529;
  --text-secondary: #6c757d;
  --text-tertiary: #adb5bd;
  --accent-primary: #00c891;
  --accent-hover: #00a378;
  --border-color: #dee2e6;
  --border-lighter: #ced4da;
  --shadow-color: rgba(0, 0, 0, 0.1);
  --input-focus-glow: rgba(0, 200, 145, 0.15);
  --highlight-gold-lightmode: #b8860b;

  --link-color: #0d6efd;
  --link-hover-color: #0a58ca;
  --link-switch-color: var(--link-color);
  --link-switch-hover: var(--link-hover-color);

  /* NEW Severity Colors (Light Mode - ensure good contrast if needed) */
  --severity-n-color: #adb5bd; /* Light mode grey */
  /* L, M, S can often inherit from dark mode vars if contrast is okay */
  --severity-l-color: var(--rating-halal);
  --severity-m-color: var(--rating-mashbouh);
  --severity-s-color: var(--rating-haram);

  /* Alert/Warning styles (Light Mode) */
  --rating-mashbouh-text: #212529;
  --alert-warning-bg: #fff3cd;
  --alert-warning-text: #664d03;
  --alert-warning-border: #ffecb5;

   background-image: none;
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-primary);
  font-weight: var(--font-body-weight);
  font-size: 16px;
  line-height: 1.6;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.container {
  max-width: 1140px;
}

/* 2. Typography */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  font-weight: var(--font-heading-weight);
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 0;
}
h1 { font-size: 2.2rem; margin-bottom: 0.5rem; }
h2 { font-size: 1.6rem; margin-bottom: 1.5rem; }
h3 { font-size: 1.3rem; }
h4 { font-size: 1.1rem; } /* Card titles */
h5 { font-size: 1rem; } /* Section titles */

a {
    color: var(--link-color);
    text-decoration: none;
    transition: color 0.2s ease;
}
a:hover {
    color: var(--link-hover-color);
}

.link-dark { color: var(--text-primary) !important; }
body.light-mode .link-dark { color: #000 !important; }
.link-secondary { color: var(--text-secondary) !important; }
.alert-link { font-weight: 600; }

blockquote {
  font-family: 'Amiri', serif;
  margin: 1.5em 0 1.5em 1.5em;
  padding: 1em 1.5em;
  border-left: 4px solid var(--border-lighter);
  background-color: var(--bg-element-lighter);
  color: var(--text-secondary);
  font-style: italic;
  font-size: 0.95rem;
  line-height: 1.7;
}
blockquote p:last-child { margin-bottom: 0; }
blockquote strong { font-style: normal; color: var(--highlight-gold) !important; }
body.light-mode blockquote strong { color: var(--highlight-gold-lightmode) !important; }

/* --- RTL Override for Blockquote --- */
html[dir="rtl"] blockquote {
  margin: 1.5em 1.5em 1.5em 0;
  border-left: none;
  border-right: 4px solid var(--border-lighter);
  font-style: normal;
}

/* 3. Header & Navigation */
.site-header { background: var(--bg-element); border-bottom: 1px solid var(--border-color); padding: 0.75rem 0; transition: background-color 0.3s ease, border-color 0.3s ease; }
body.light-mode .site-header { box-shadow: 0 1px 3px rgba(0,0,0,0.07); }
.navbar { padding: 0; }
.site-brand { filter: brightness(1) saturate(0.3) hue-rotate(65deg); font-size: 1.4rem; color: var(--accent-primary) !important; display: flex; align-items: center; letter-spacing: 1px; transition: filter 0.3s ease; }
.site-brand:hover { filter: brightness(1) saturate(1); }
.site-brand svg { width: 20px; height: 20px; margin-right: 8px; }
.navbar .nav-link { font-family: var(--font-heading); font-weight: 600; font-size: 0.9rem; text-transform: uppercase; color: var(--text-secondary); padding: 0.5rem 1rem; border-bottom: 3px solid transparent; transition: color 0.2s ease, border-color 0.2s ease; }
.navbar .nav-link:hover, .navbar .nav-link.active { color: var(--text-primary); border-bottom-color: var(--accent-primary); }
body.light-mode .navbar .nav-link:hover, body.light-mode .navbar .nav-link.active { color: var(--accent-primary); }
.navbar .admin-link:hover { color: var(--rating-haram) !important; border-bottom-color: var(--rating-haram); }
.navbar-toggler { border-color: var(--border-color); }
.navbar-toggler-icon { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(232, 234, 246, 0.8)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"); }
body.light-mode .navbar-toggler-icon { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(33, 37, 41, 0.7)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");}

.site-logo { max-height: 35px; width: auto; }
body.light-mode .site-brand { filter: brightness(0.85) saturate(0); }
body.light-mode .site-brand:hover { filter: brightness(1) saturate(1); }
html[dir="rtl"] .site-logo { margin-right: 0; margin-left: 8px; } /* RTL logo margin */

/* ... (keep nav link, toggler styles) ... */
.navbar .nav-link, .navbar .dropdown-toggle { padding-top: 0.7rem; padding-bottom: 0.7rem; } /* Adjust padding for vertical centering */
.navbar-nav .nav-item { display: flex; align-items: center; } /* Align items vertically */

/* Account Dropdown Icons */
.dropdown-menu .material-symbols-outlined.small-icon {
  font-size: 1.1em;
  vertical-align: -3px; /* Fine-tune vertical alignment */
}

/* 4. Main Content & Page Headers */
.main-content { padding-top: 3rem; padding-bottom: 4rem; }
.page-header { padding-bottom: 0.75rem; margin-bottom: 2rem; position: relative; border-bottom: 1px solid var(--border-color); }
.page-header::after { content: ''; position: absolute; bottom: -1px; left: 0; width: 60px; height: 3px; background-color: var(--accent-primary); }
.page-header h1 { margin-bottom: 0; color: var(--text-primary); font-size: 1.8rem;}

/* 5. Game Card (List View) */
.card.game-card { background-color: var(--bg-element); border: 1px solid var(--border-color); border-radius: 6px; transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease; overflow: hidden; }
.card-link-wrapper { display: block; text-decoration: none; color: inherit; transition: none; height: 100%; }
.card-link-wrapper:hover .card.game-card { transform: translateY(-4px); border-color: var(--border-lighter); box-shadow: 0 6px 12px var(--shadow-color); }
.card-img-top { aspect-ratio: 2.14; object-fit: cover; border-bottom: 1px solid var(--border-color); }
.card-img-top.bg-secondary { background-color: var(--bg-element-lighter) !important; display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-family: var(--font-primary); font-size: 0.9rem; }
.card-body { padding: 1rem 1.25rem; background-color: var(--bg-element); }
.card-title { font-size: 1.1rem; margin-bottom: 0.25rem; color: var(--text-primary); font-weight: var(--font-heading-weight); text-transform: uppercase;}
.game-meta { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.75rem; }
.rating-flags-container { padding-top: 0.75rem; border-top: 1px solid var(--border-color); }

/* Rating Badge */
.rating-badge { display: inline-block; font-family: var(--font-heading); font-weight: 600; font-size: 0.75rem; padding: 4px 10px; border-radius: 2px; text-transform: uppercase; letter-spacing: 1px; text-align: center; color: #000; }

.rating-icon { font-size: 1.7em; vertical-align: -2px; margin-right: 4px; position: relative; top: 1px; }
.rating-label { position: relative; top: -2px; }
html[dir="rtl"] .rating-label { position: relative; top: 0; }

/* Flags */
.flag-symbol { font-family: 'Material Symbols Outlined'; font-weight: normal; font-style: normal; font-size: 1.1rem; line-height: 1; letter-spacing: normal; text-transform: none; display: inline-block; white-space: nowrap; word-wrap: normal; direction: ltr; -webkit-font-feature-settings: 'liga'; font-feature-settings: 'liga'; -webkit-font-smoothing: antialiased; color: var(--text-secondary); background-color: var(--bg-tertiary); border: 1px solid var(--border-color); padding: 4px; border-radius: 4px; vertical-align: -2px; transition: color 0.2s, background-color 0.2s, border-color 0.2s; }
.no-flags-message { min-height: 30px; display: flex; align-items: center; } /* Ensure consistency */

/* 6. Game Detail Page */
.detail-image-wrapper { background-color: var(--bg-element-lighter); border: 1px solid var(--border-color); padding: 0.75rem; border-radius: 6px; margin-bottom: 1.5rem; }
.detail-image-wrapper img, .detail-image-wrapper .img-fluid { display: block; width: 100%; height: auto; border-radius: 4px; }
.detail-image-wrapper .img-fluid.rounded.shadow { min-height: 250px; display: flex; align-items: center; justify-content: center; background-color: var(--bg-element-lighter); color: var(--text-secondary); box-shadow: none; }
.detail-title { font-size: 2rem; font-weight: var(--font-heading-weight); color: var(--text-primary); margin-bottom: 0.25rem; border-bottom: 2px solid var(--accent-primary); padding-bottom: 0.5rem; display: inline-block; }
.detail-meta { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; position: relative; padding-bottom: 0.75rem; }
.detail-meta a { color: var(--text-secondary); }
.detail-meta a:hover { color: var(--accent-primary); }
.detail-overall-rating { margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.95rem; }
.detail-overall-rating .rating-badge { font-size: 0.8rem; padding: 4px 10px; vertical-align: middle; }
.game-summary { font-size: 0.95rem; color: var(--text-secondary); margin-top: 1rem; margin-bottom: 0; }
.store-links-section { border-top: 1px solid var(--border-color); padding-top: 0.75rem; }
.store-links-title { font-family: var(--font-heading); font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px; }
.store-link { display: inline-block; background-color: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; margin-right: 5px; margin-bottom: 5px; font-size: 0.8rem; font-weight: 600; text-decoration: none; border: 1px solid var(--border-color); transition: all 0.2s ease; }
.store-link:hover { color: var(--text-primary); background-color: var(--bg-element-lighter); border-color: var(--border-lighter); text-decoration: none; }
.store-link.steam { border-left: 3px solid #66c0f4; }
.store-link.epic { border-left: 3px solid #ffffff; }
.store-link.gog { border-left: 3px solid #8a43ce; }
.store-link.other { border-left: 3px solid var(--text-secondary); }
.mgc-rating-section { margin-bottom: 1.5rem !important; }
.critic-reviews-section { padding-top: 1.5rem; }
.sharing-buttons { display: inline-block; position: relative; top: -2px; left: -5px; right: -5px;}
.sharing-buttons .btn { transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease; }
.sharing-buttons .btn:hover { background-color: var(--bg-element-lighter); border-color: var(--border-lighter); color: var(--text-primary); }

/* 7. MGC Guidance Breakdown */
.mgc-guide-section { margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color); }
.guide-section-title { font-weight: var(--font-heading-weight); color: var(--text-primary); margin-bottom: 1.5rem !important; text-align: center; text-transform: uppercase; letter-spacing: 1px; font-size: 1.5rem; }
.guide-subsection-title { font-size: 1.1rem; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px dashed var(--border-lighter); } /* Added styling for subsections */
.guide-category-block { background-color: transparent; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 1rem; overflow: hidden; }
.descriptor-severity { min-width: 120px; line-height: 1.2; } /* Adjusted width */

/* Category Header */
.guide-category-header { background-color: var(--bg-element); padding: 0.75rem 1.25rem; display: flex; justify-content: space-between; align-items: center; cursor: default; /* Default cursor */ position: relative; transition: background-color 0.2s ease; }
/* Make header clickable only if it has the collapse attribute */
.guide-category-header[data-bs-toggle="collapse"] { cursor: pointer; }
.guide-category-header[data-bs-toggle="collapse"]:hover { background-color: var(--bg-element-lighter); }
/* Style for headers that are NOT expandable (i.e., severity is None) */
.guide-category-header:not([data-bs-toggle="collapse"]):hover { background-color: var(--bg-element); /* Prevent hover background change */ }

.category-title-text { font-size: 0.8rem; font-weight: var(--font-heading-weight); color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 1px; }

/* Severity Display */
.severity-display { gap: 0.25rem; }
.severity-text { font-size: 0.75rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; line-height: 1; }
.severity-circle { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-left: 10px; flex-shrink: 0; border: 1px solid rgba(0,0,0,0.2); }
.severity-circle.severity-n { background-color: var(--severity-n-color); }
.severity-circle.severity-l { background-color: var(--severity-l-color); }
.severity-circle.severity-m { background-color: var(--severity-m-color); }
.severity-circle.severity-s { background-color: var(--severity-s-color); } /* UPDATED */
html[dir="rtl"] .severity-circle { margin-left: 0; margin-right: 10px; }

/* Toggle Indicator */
.guide-category-header .material-symbols-outlined.toggle-indicator { color: var(--text-secondary); font-size: 1.25rem; transition: transform 0.3s ease; vertical-align: middle; line-height: 1; }
.guide-category-header[aria-expanded="true"] .material-symbols-outlined.toggle-indicator { transform: rotate(180deg); }

/* Details Section */
.guide-category-details { padding: 1rem 1.25rem; font-size: 0.95rem; line-height: 1.7; color: var(--text-primary); background-color: transparent; }
.guide-category-details p:last-child { margin-bottom: 0; }
.guide-category-block .collapse.show .guide-category-details { border-top: 1px solid var(--border-color); }
.category-reason-inline { margin-top: 1rem; padding-top: 0.75rem; }
.reason-separator { margin-top: 0; margin-bottom: 0.75rem; border-top: 1px dashed var(--border-color); opacity: 0.5; }
.reason-label { font-size: 0.8rem; font-weight: 600; color: var(--text-tertiary); margin-bottom: 0.25rem; text-transform: uppercase; letter-spacing: 0.5px; }
.reason-text { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0; }

/* Spoiler Alert */
.spoiler-alert { background-color: var(--alert-warning-bg); color: var(--alert-warning-text); border-color: var(--alert-warning-border); border-radius: 4px; margin-bottom: 1.5rem; font-weight: 600; padding: 0.75rem 1rem; }
.spoiler-alert strong { color: inherit; }
.spoiler-alert svg { vertical-align: -2px; }
html[dir="rtl"] .spoiler-alert svg { margin-left: 0.5rem; margin-right: 0; }

/* 8. Articles */
.article-item { padding-bottom: 1.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); }
.article-item:last-child { border-bottom: none; margin-bottom: 0; }
.article-item h4 { font-size: 1.3rem; margin-bottom: 0.3rem; font-family: var(--font-heading); }
.article-item h4 a { color: var(--text-primary); transition: color 0.2s ease; }
.article-item h4 a:hover { color: var(--accent-primary); text-decoration: none; }
.article-meta { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 1rem; text-transform: uppercase; }
.article-excerpt { color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.95rem; }
.read-more-link { font-family: var(--font-heading); font-weight: 600; color: var(--accent-primary); text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px; }
.read-more-link:hover { color: var(--accent-hover); }
.article-detail-meta { color: var(--text-secondary); font-size: 0.9rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem; }
.article-content { line-height: 1.7; color: var(--text-primary); }
.article-content strong { color: var(--accent-primary); font-weight: 600; }
.article-content a { text-decoration: underline; color: var(--link-color); }
.article-content a:hover { color: var(--link-hover-color); }

/* 9. Footer */
.site-footer { background-color: var(--bg-element); border-top: 1px solid var(--border-color); padding: 1.5rem 0; margin-top: 4rem; }
.footer-text { color: var(--text-secondary); font-size: 0.9rem; text-align: center; margin: 0; }
.footer-link { text-decoration: underline; color: var(--link-color); } /* Use link color */
.footer-link:hover { color: var(--link-hover-color); }

/* 10. Filter/Sort Sidebar Styling */
.filter-sort-form.card {
    border-radius: 8px; /* Match card style */
    box-shadow: 0 2px 5px var(--shadow-color);
}
.filter-sort-form .card-header {
    background-color: var(--bg-element-lighter);
    border-bottom: 1px solid var(--border-color);
    padding: 0.75rem 1rem;
}
.filter-sort-form .card-header h5 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin: 0;
}
.filter-sort-form .card-body {
    padding: 1rem 1rem 0.5rem; /* Adjust padding */
}
.filter-sort-form .form-label-sm {
    color: var(--text-secondary); /* Ensure label color */
    margin-bottom: 0.4rem; /* More space below label */
}
.filter-sort-form .form-select-sm, .filter-sort-form .form-control-sm {
    background-color: var(--bg-element); /* Ensure consistent background */
    border-color: var(--border-color);
    color: var(--text-primary);
}
.filter-sort-form .filter-platform-list {
    max-height: 150px; /* Limit height and allow scroll */
    overflow-y: auto;
    padding: 5px;
    /* background-color: var(--bg-primary); */ /* Optional subtle background */
    border-radius: 4px;
    border: 1px solid var(--border-color);
}
.filter-sort-form .card-footer {
    background-color: var(--bg-element-lighter);
    border-top: 1px solid var(--border-color);
    padding: 0.75rem 1rem;
}
.filter-sort-form .filter-apply-btn .material-symbols-outlined {
     font-size: 1.2em; /* Make icon slightly bigger */
}
.filter-sort-form .form-check-input:checked {
    background-color: var(--accent-primary);
    border-color: var(--accent-primary);
}
.filter-sort-form .form-check-input:focus {
    border-color: var(--link-color); /* Use link color for focus */
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-link-rgb), 0.25);
}
body.light-mode .filter-sort-form .form-check-input:focus {
     border-color: #86b7fe; /* Bootstrap default focus */
     box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* 11. Back Link */
.back-link { display: inline-block; margin-top: 2rem; font-size: 0.9rem; color: var(--text-secondary); text-decoration: none; padding: 8px 0; border-bottom: 1px dashed var(--border-color); transition: color 0.2s, border-color 0.2s; }
.back-link:hover { color: var(--text-primary); border-color: var(--text-primary); }

/* 12. Homepage Hero */
.homepage-hero { background: var(--bg-element); padding: 3rem 1.5rem; margin-bottom: 3rem !important; border-radius: 6px; border: 1px solid var(--border-color); text-align: center; }
.homepage-hero .logo { margin-top: -33px; }
.homepage-hero p.lead { color: var(--text-secondary); font-weight: 400; font-size: 1rem; max-width: 600px; margin: 0 auto 1.5rem auto; }
.homepage-hero .btn { font-weight: 600; text-transform: uppercase; padding: 0.6rem 1.2rem; font-size: 0.9rem; letter-spacing: 0.5px; border-radius: 4px; border-width: 1px; }
.homepage-hero .btn-primary { background-color: var(--accent-primary); border-color: var(--accent-primary); color: var(--bg-primary); }
.homepage-hero .btn-primary:hover { background-color: var(--accent-hover); border-color: var(--accent-hover); transform: translateY(-2px); }
.homepage-hero input { font-size: 1rem; }
.homepage-hero .btn-outline-secondary { color: var(--text-primary); border-color: var(--text-secondary); }
.homepage-hero .btn-outline-secondary:hover { background-color: var(--bg-element-lighter); color: var(--text-primary); border-color: var(--text-primary); transform: translateY(-2px); }
.homepage-hero .section-title { font-size: 1.4rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; margin-bottom: 1.5rem !important; color: var(--accent-primary); text-align: left; font-weight: 800;}
.homepage-hero .logo-text-ar { font-family: 'Tajawal', 'sans-serif'; font-weight: 800; text-align: right; }
.homepage-hero .logo-text-en { font-family: 'Montserrat', 'sans-serif'; font-weight: 700; text-align: left; }
.homepage-hero .logo-text-ar, .homepage-hero .logo-text-en { color: #00c891; display: inline-block; font-size: 30px; line-height: 1; position: relative; top: 31px; margin: 0 10px; }
.article-summary h5 a { color: var(--text-primary); text-decoration: none; font-size: 1rem; font-weight: var(--font-heading-weight); }
.article-summary h5 a:hover { color: var(--accent-primary); }
.article-summary-meta { font-size: 0.8rem; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 0.25rem; }
.article-summary-excerpt { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0; }

/* 13. Pagination */
.pagination .page-link { background-color: var(--bg-element); border-color: var(--border-color); color: var(--text-secondary); }
.pagination .page-link:hover { background-color: var(--bg-tertiary); color: var(--text-primary); }
.pagination .page-item.active .page-link { background-color: var(--accent-primary); border-color: var(--accent-primary); color: var(--bg-primary); font-weight: 600; }
.pagination .page-item.disabled .page-link { background-color: var(--bg-element); border-color: var(--border-color); color: var(--text-tertiary); }

/* 14. Glossary Page */
.glossary-content dt { font-family: var(--font-heading); font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color); }
.glossary-content dt:first-of-type { border-top: none; }
.glossary-content dd { color: var(--text-secondary); margin-bottom: 1rem; padding-left: 1rem; padding-top: 1rem; }
.glossary-content dt .material-symbols-outlined, .glossary-content dt .severity-circle { margin-right: 8px; vertical-align: -3px; font-size: 1.7em; }
.glossary-content dt .severity-circle { width: 14px; height: 14px; border: none; display: inline-block; border-radius: 50%;}

/* 15. Theme & Language Toggle Buttons */
.theme-toggle-button, .language-toggle-button { background: none; border: 1px solid var(--border-color); color: var(--text-secondary); padding: 0; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; transition: color 0.2s, border-color 0.2s, background-color 0.2s; display: flex; align-items: center; justify-content: center; line-height: 1; }
.theme-toggle-button { margin-left: 1rem; }
.language-toggle-button { font-family: var(--font-heading); font-weight: 600; font-size: 0.9rem; margin-left: 0.5rem; } /* Reduced margin */
.theme-toggle-button:hover, .language-toggle-button:hover { color: var(--accent-primary); border-color: var(--accent-primary); background-color: var(--bg-element-lighter); }
.theme-toggle-button .material-symbols-outlined { font-size: 1.2rem; }
html[dir="rtl"] .theme-toggle-button { margin-left: 0; margin-right: 1rem; }
html[dir="rtl"] .language-toggle-button { margin-left: 0; margin-right: 0.5rem; }
#language-toggle-text { margin-top: -4px; } /* Adjust vertical alignment */
html[dir="rtl"] #language-toggle-text { margin-top: 0px; }

/* 16. Authentication Forms */
.registration-form-container { padding-top: 2rem; padding-bottom: 3rem; }
.registration-form-container .form-wrapper { background-color: var(--bg-element); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: 0 10px 30px var(--shadow-color); color: var(--text-primary); }
.registration-form-container .card-body { padding: 2rem 2.5rem; }
.registration-form-container .form-title { color: var(--text-primary); font-weight: 800; text-transform: uppercase; font-size: 1.6rem; letter-spacing: 1px; margin-bottom: 2rem; text-align: center; }
.registration-form-container .form-field-group { margin-bottom: 1.5rem; }
.registration-form-container .form-field-group label.form-label { color: var(--text-secondary); font-weight: 600; font-size: 0.85rem; margin-bottom: 0.5rem; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
.registration-form-container input[type="text"], .registration-form-container input[type="email"], .registration-form-container input[type="password"], .registration-form-container .form-control { background-color: var(--bg-primary); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 4px; padding: 0.75rem 1rem; font-size: 1rem; height: auto; width: 100%; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
.registration-form-container input:focus { background-color: var(--bg-primary); border-color: var(--accent-primary); box-shadow: 0 0 0 0.2rem var(--input-focus-glow); color: var(--text-primary); outline: none; }
.registration-form-container input::placeholder { color: var(--text-tertiary); opacity: 1; }
.registration-form-container .form-help-text, .registration-form-container ul li { color: var(--text-secondary) !important; font-size: 0.8rem; line-height: 1.5; }
.registration-form-container .form-help-text { padding-left: 0; margin-top: 0.4rem; }
.registration-form-container ul { list-style: none; padding-left: 0; margin-top: 0.6rem; margin-bottom: 0; }
.registration-form-container ul li { margin-bottom: 0.3rem; position: relative; padding-left: 1.4em; }
.registration-form-container ul li::before { content: '•'; position: absolute; left: 0.25em; color: var(--text-tertiary); font-size: 1.2em; line-height: 1; }
.registration-form-container .form-error-text { font-size: 0.8rem; color: var(--rating-haram); margin-top: 0.4rem; font-weight: 600; }
.registration-form-container .form-error-alert { background-color: rgba(255, 82, 82, 0.1); border: 1px solid rgba(255, 82, 82, 0.3); color: #ff8a8a; font-size: 0.9rem; border-radius: 4px; padding: 0.75rem 1rem; }
.registration-form-container .form-error-alert p { margin-bottom: 0; }
.registration-form-container .btn-submit { background-color: var(--accent-primary); border-color: var(--accent-primary); color: var(--bg-primary); font-family: var(--font-heading); font-weight: 800; text-transform: uppercase; padding: 0.8rem 1rem; letter-spacing: 1.5px; border-radius: 4px; transition: all 0.2s ease; width: 100%; margin-top: 1rem; }
.registration-form-container .btn-submit:hover { background-color: var(--accent-hover); border-color: var(--accent-hover); color: var(--bg-primary); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0, 255, 170, 0.2); }
.registration-form-container .form-switch-link { color: var(--text-secondary) !important; font-size: 0.9rem; text-align: center; margin-top: 1.5rem; }
.registration-form-container .form-switch-link a { color: var(--link-switch-color) !important; font-weight: 600; text-decoration: underline; text-decoration-color: var(--border-color); transition: color 0.2s ease, text-decoration-color 0.2s ease; }
.registration-form-container .form-switch-link a:hover { color: var(--link-switch-hover) !important; text-decoration-color: var(--link-switch-hover); }

/* Comments Section */
.comment-actions .comment-action-btn { padding: 0.1rem 0.4rem; font-size: 0.8rem; margin-left: 5px; /* LTR */ }
html[dir="rtl"] .comment-actions .comment-action-btn { margin-left: 0; margin-right: 5px; /* RTL */ }
.comment-unapproved, .contribution-unapproved { opacity: 0.7; border-left: 3px solid var(--rating-mashbouh); padding-left: 10px; /* LTR */ }
html[dir="rtl"] .comment-unapproved, html[dir="rtl"] .contribution-unapproved { border-left: none; border-right: 3px solid var(--rating-mashbouh); padding-left: 0; padding-right: 10px; /* RTL */ }
.g-recaptcha { margin-bottom: 1rem; }
.comment-form-container .alert, .contribution-form-container .alert { font-size: 0.9rem; }
.guide-subsection-title { font-size: 1.1rem; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px dashed var(--border-lighter); }
.sharing-buttons .btn { padding: 0.25rem 0.5rem; font-size: 0.8rem; margin-right: 0.25rem; }
html[dir="rtl"] .sharing-buttons .btn { margin-right: 0; margin-left: 0.25rem; }
.user-stars i, .user-stars-input i { margin-right: 1px; } /* Spacing between stars */
html[dir="rtl"] .user-stars i, html[dir="rtl"] .user-stars-input i { margin-right: 0; margin-left: 1px; }
.user-stars-input i { font-size: 1.1em; } /* Slightly larger stars for input */
.contribution-form-container .form-check-input { margin-top: 0.1em; } /* Align radio buttons better */
.contribution-form-container .form-check-label { cursor: pointer; } /* Make star labels clickable */
.back-link .material-symbols-outlined { font-size: 1.3em; } /* Adjust back icon size */
.category-icon { font-size: 1.1em; color: var(--text-secondary); vertical-align: -2px; }
html[dir="rtl"] .category-icon.me-2 { margin-right: 0 !important; margin-left: 0.5rem !important; }

/* Platform Icons Specifics */
.platform-icons-container { line-height: 1; margin-bottom: 0.5rem; }
.platform-icon { display: inline-block; font-size: 1.1rem; color: var(--text-secondary); margin-right: 6px; padding: 2px; vertical-align: middle; transition: color 0.2s ease; }
.platform-icon:hover { color: var(--text-primary); }
.platform-icon.platform-ps:hover { color: #0070d1; }
.platform-icon.platform-xbox:hover { color: #107c10; }
.platform-icon.platform-switch:hover { filter: brightness(1.2); } /* Example hover for SVG */
.platform-icon.platform-pc:hover { color: #00a4ef; }
.detail-platform-section .platform-icon { font-size: 1.3rem; margin-right: 8px; }
.platform-icon img { width: 20px; height: 20px; position: relative; top: -2px; filter: brightness(0.8) saturate(0.5); transition: filter 0.2s ease; } /* Default dimmed SVG */
.card-body .platform-icon img { width: 16px; height: 16px; }
body.light-mode .platform-icon img { filter: brightness(0.5) saturate(0.5); } /* Dimmed for light mode */
.platform-icon:hover img { filter: brightness(1) saturate(1); } /* Full color on hover */
html[dir="rtl"] .platform-icon { margin-right: 0; margin-left: 6px; }
html[dir="rtl"] .detail-platform-section .platform-icon { margin-right: 0; margin-left: 8px; }

/* Sidebar / Lists */
.list-group { border: 1px solid var(--border-color); border-radius: 6px; overflow: hidden; background-color: var(--bg-element); padding: 0; }
.list-group-item { background-color: var(--bg-element); color: var(--text-secondary); border: none; padding: 0.65rem 1rem; transition: background-color 0.2s ease, color 0.2s ease; }
.list-group-item + .list-group-item { border-top: 1px solid var(--border-color); }
.list-group-item-action { color: var(--text-secondary); font-weight: 500; }
.list-group-item-action:hover, .list-group-item-action:focus { background-color: var(--bg-element-lighter); color: var(--text-primary); outline: none; box-shadow: none; }
.list-group-item.active { background-color: var(--accent-primary); border-color: var(--accent-primary); color: var(--bg-primary); font-weight: 700; }
.list-group-item.active:hover, .list-group-item.active:focus { background-color: var(--accent-primary); border-color: var(--accent-primary); color: var(--bg-primary); }
body.light-mode .list-group { border-color: var(--border-color); background-color: var(--bg-element); }
body.light-mode .list-group-item { background-color: var(--bg-element); color: var(--text-secondary); border-color: var(--border-color); }
body.light-mode .list-group-item + .list-group-item { border-top: 1px solid var(--border-color); }
body.light-mode .list-group-item-action { color: var(--text-secondary); }
body.light-mode .list-group-item-action:hover, body.light-mode .list-group-item-action:focus { background-color: var(--bg-element-lighter); color: var(--text-primary); }
body.light-mode .list-group-item.active { background-color: var(--accent-primary); border-color: var(--accent-primary); color: #fff; }
body.light-mode .list-group-item.active:hover, body.light-mode .list-group-item.active:focus { background-color: var(--accent-primary); border-color: var(--accent-primary); color: #fff; }

/* Responsive Adjustments */
@media (max-width: 768px) {
    h1 { font-size: 1.8rem; }
    .detail-title { font-size: 1.6rem; }
    .main-content { padding-top: 2rem; padding-bottom: 2rem; }
    .navbar-nav { margin-top: 0.5rem; }
    .registration-form-container .card-body { padding: 1.5rem; }
    .theme-toggle-button, .language-toggle-button { margin-left: 0.5rem;}
    html[dir="rtl"] .theme-toggle-button, html[dir="rtl"] .language-toggle-button { margin-left: 0; margin-right: 0.5rem; }
    .filter-sort-form.card { margin-top: 1.5rem; }
}

/* ==========================================================================
   RTL Overrides (Consolidated)
   ========================================================================== */
html[dir="rtl"] body { text-align: right; font-family: 'Noto', var(--font-primary), sans-serif; }
html[dir="rtl"] h1, html[dir="rtl"] h2, html[dir="rtl"] h3, html[dir="rtl"] h4, html[dir="rtl"] h5, html[dir="rtl"] h6 { font-family: 'Tajawal', var(--font-heading), sans-serif; }
html[dir="rtl"] .navbar-nav { margin-right: auto !important; margin-left: 0 !important; padding-right: 0; }
html[dir="rtl"] .dropdown-menu-end { right: auto !important; left: 0 !important; }
html[dir="rtl"] .dropdown-menu[data-bs-popper] { left: 0 !important; right: auto !important; }
html[dir="rtl"] .page-header h1 { text-align: right; }
html[dir="rtl"] .page-header::after { left: auto; right: 0; }
html[dir="rtl"] .page-header .search-form { margin-right: auto !important; margin-left: 0 !important; }
html[dir="rtl"] .filter-sort-form .text-end { text-align: left !important; }
html[dir="rtl"] .game-meta, html[dir="rtl"] .detail-meta { text-align: right; }
html[dir="rtl"] .flag-item .flag-symbol { margin-right: 0; margin-left: 8px; }
html[dir="rtl"] .store-link { margin-right: 0; margin-left: 5px; border-left: none; }
html[dir="rtl"] .store-link.steam { border-right: 3px solid #66c0f4; }
html[dir="rtl"] .store-link.epic { border-right: 3px solid #ffffff; }
html[dir="rtl"] .store-link.gog { border-right: 3px solid #8a43ce; }
html[dir="rtl"] .store-link.other { border-right: 3px solid var(--text-secondary); }
html[dir="rtl"] .critic-summary { border-right: 0.25rem solid var(--border-color); border-left: none; padding-right: 1rem; padding-left: 0; }
html[dir="rtl"] .critic-link .external-link-icon { margin-right: 0.25rem; margin-left: 0; }
html[dir="rtl"] .severity-circle { margin-left: 0; margin-right: 10px; }
html[dir="rtl"] .guide-category-details { text-align: right; }
html[dir="rtl"] .category-reason strong { display: block; }
html[dir="rtl"] .spoiler-alert svg { margin-left: 0.5rem; margin-right: 0; }
html[dir="rtl"] .article-item h4, html[dir="rtl"] .article-meta, html[dir="rtl"] .article-excerpt, html[dir="rtl"] .read-more-link, html[dir="rtl"] .article-detail-meta, html[dir="rtl"] .article-content { text-align: right; }
html[dir="rtl"] .filter-sort-form .form-label-sm { text-align: right; }
html[dir="rtl"] .glossary-content dt { text-align: right; }
html[dir="rtl"] .glossary-content dt .material-symbols-outlined, html[dir="rtl"] .glossary-content dt .severity-circle { margin-right: 0; margin-left: 8px; }
html[dir="rtl"] .glossary-content dd { padding-left: 0; padding-right: 1rem; margin-right: 0; text-align: right; }
html[dir="rtl"] .registration-form-container .form-field-group label.form-label, html[dir="rtl"] .registration-form-container .form-error-text, html[dir="rtl"] .registration-form-container .form-help-text { text-align: right; }
html[dir="rtl"] .registration-form-container input[type="text"], html[dir="rtl"] .registration-form-container input[type="email"], html[dir="rtl"] .registration-form-container input[type="password"] { text-align: right; }
html[dir="rtl"] .registration-form-container ul li { text-align: right; padding-left: 0; padding-right: 1.4em; }
html[dir="rtl"] .registration-form-container ul li::before { left: auto; right: 0.25em; }
html[dir="rtl"] .ms-auto { margin-left: auto !important; margin-left: 0 !important; }
html[dir="rtl"] .me-2 { margin-left: 0.5rem !important; margin-right: 0 !important; }
html[dir="rtl"] .ms-2 { margin-right: 0.5rem !important; margin-left: 0 !important; }
html[dir="rtl"] .ps-3 { padding-right: 1rem !important; padding-left: 0 !important; }
/* --- END RTL Overrides --- */

html[dir="rtl"] dd { margin-right: 0; }

body.rtl { font-family: 'Tajawal', 'Cairo', var(--font-primary), sans-serif; }
body.rtl h1, body.rtl h2, body.rtl h3, body.rtl h4, body.rtl h5, body.rtl h6 { font-family: 'Tajawal', 'Cairo', var(--font-heading), sans-serif; }
body.rtl .rating-badge .rating-label { top: 0; }
body.rtl #language-toggle-text { margin-top: 0px; }

/* Ensure icons align well in buttons/links */
.btn .material-symbols-outlined,
.page-link .material-symbols-outlined,
.back-link .material-symbols-outlined {
    vertical-align: -3px; /* Adjust as needed */
    font-size: 1.2em; /* Slightly larger icons */
}
.alert .btn .material-symbols-outlined {
    font-size: 1em; /* Keep alert button icons smaller */
    vertical-align: -2px;
}

/* Community Feedback Section */
.user-contributions-section .section-title {
  border-bottom: 1px solid var(--border-color); /* Match other section titles */
}
.community-details summary {
  cursor: pointer;
  list-style: none; /* Hide default marker */
  padding: 0; /* Remove default padding if any */
}
.community-details summary::-webkit-details-marker {
  display: none; /* Hide default marker in WebKit */
}
.community-details summary .descriptor-item {
   transition: background-color 0.2s ease;
   border-bottom: none; /* Remove border from summary item */
   padding: 0.6rem 0; /* Adjust padding */
}
.community-details summary .descriptor-item:hover {
  background-color: var(--bg-element-lighter);
}
.community-details[open] summary .descriptor-item {
   background-color: var(--bg-element-lighter);
}
.user-comments-for-category {
  background-color: var(--bg-primary); /* Slightly different bg for comments */
  border-radius: 0 0 4px 4px;
  padding: 0.75rem 1rem;
  margin-top: -1px; /* Overlap border slightly */
  border: 1px solid #404552;
  border-top: none;
}

/* Contribution Modal */
.modal-content { background-color: var(--bg-element); color: var(--text-primary); }
.modal-header, .modal-footer { border-color: var(--border-color); }
.btn-close-white { filter: invert(90%) sepia(15%) saturate(300%) hue-rotate(190deg) brightness(100%) contrast(90%); } /* Adjust close button color */
.btn-close-white:hover { filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(100%) contrast(100%); }
.contribution-form-container .form-check-inline { margin-bottom: 0.5rem; } /* Spacing for radio buttons */
.contribution-form-container .form-select-sm { height: calc(1.5em + 0.5rem + 2px); padding-top: 0.25rem; padding-bottom: 0.25rem; }

/* Ensure form labels inside modal are styled correctly */
#contributionModal .form-label-sm {
  font-size: 0.8rem;
  color: var(--text-secondary);
  margin-bottom: 0.25rem;
  text-transform: uppercase;
  font-weight: 600;
}
#contributionModal .small-icon {
  font-size: 1em; /* Adjust icon size within label */
  vertical-align: -2px;
}

/* --- MGC Descriptors & Quick Summary Layout --- */
.content-descriptors, .quick-summary {
  height: 100%; /* Make columns equal height potentially */
}
.content-descriptors .section-title { margin-bottom: 0.5rem; } /* Less margin below title */
.quick-summary .section-title { margin-bottom: 1rem; }
.quick-summary-content { font-size: 0.95rem; line-height: 1.6; }
.quick-summary-content strong { color: var(--accent-primary); } /* Keep rationale highlight */
.quick-summary-content p { margin-bottom: 0.75rem; }
.quick-summary-content p:last-child { margin-bottom: 0; }
.quick-summary-content .small { font-size: 0.85rem; color: var(--text-secondary); }

/* Descriptor Item alignment fix */
.descriptor-item {
  display: flex;
  align-items: center; /* Vertically align */
  padding: 0.4rem 0;
  border-bottom: 1px solid var(--border-color);
}
.descriptor-item:last-child { border-bottom: none; }
.descriptor-icon { flex: 0 0 30px; /* Fixed width */ text-align: center; margin-right: 10px; font-size: 1.3em; color: var(--text-secondary); }
.descriptor-name { flex-grow: 1; /* Takes remaining space */ font-size: 0.9rem; color: var(--text-primary); padding-right: 10px; /* Space before severity */ }
.descriptor-severity { flex-shrink: 0; /* Don't shrink */ text-align: right; min-width: 120px; line-height: 1.2; }
html[dir="rtl"] .descriptor-icon { margin-right: 0; margin-left: 10px; }
html[dir="rtl"] .descriptor-name { padding-right: 0; padding-left: 10px; text-align: right; }
html[dir="rtl"] .descriptor-severity { text-align: left; }
html[dir="rtl"] .severity-circle { margin-left: 0; margin-right: 6px; }


/* Community Feedback Section */
.user-contributions-section .section-title { border-bottom-color: var(--border-color); } /* Consistency */
.community-details summary { cursor: pointer; list-style: none; }
.community-details summary::-webkit-details-marker { display: none; }
.community-details summary .descriptor-item { transition: background-color 0.2s ease; border-bottom: none; padding: 0.6rem 0; }
.community-details summary .descriptor-item:hover { background-color: var(--bg-element-lighter); }
.community-details[open] summary .descriptor-item { background-color: var(--bg-element-lighter); }
.user-comments-for-category { background-color: var(--bg-primary); border-radius: 0 0 4px 4px; padding: 0.75rem 1rem; margin-top: -1px; border: 1px solid #404552; border-top: none; }
.user-comments-for-category p { margin-bottom: 0.5rem !important; }
.user-comments-for-category p:last-child { margin-bottom: 0 !important; }

/* Contribution Modal */
.modal-content { background-color: var(--bg-element); color: var(--text-primary); }
.modal-header, .modal-footer { border-color: var(--border-color); }
.btn-close-white { filter: invert(90%) sepia(15%) saturate(300%) hue-rotate(190deg) brightness(100%) contrast(90%); }
.btn-close-white:hover { filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(100%) contrast(100%); }
#contributionModal .form-label-sm { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem; text-transform: uppercase; font-weight: 600; }
#contributionModal .small-icon { font-size: 1em; vertical-align: -2px; }
#contributionModal .form-select-sm { height: calc(1.5em + 0.5rem + 2px); padding-top: 0.25rem; padding-bottom: 0.25rem; }
