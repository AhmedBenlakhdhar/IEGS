{# templates/ratings/contact.html #}
{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load widget_tweaks %}

{% block title %}{% translate "Contact Us" %}{% endblock %}

{% block content %}
<div class="page-header">
  <h1>{% translate "Contact Us" %}aa</h1>
</div>

<div class="row justify-content-center">
    <div class="col-md-8 col-lg-7">
         <p class="lead text-secondary mb-4">
             {% blocktranslate %}Have questions, suggestions, or feedback about MGC? Please use the form below to get in touch. We appreciate your input!{% endblocktranslate %}
         </p>

         {# --- Message Display Block --- #}
         {% if messages %}
            {% for message in messages %}
                {# --- Add this condition to filter messages --- #}
                {% if 'contact_form' in message.tags %}
                    {# Determine alert class based on level/tags #}
                    {% with level_tag=message.level_tag %}
                        {% if 'form_error' in message.tags or message.level >= 40 %} {# Error Level or form_error tag #}
                            <div class="alert alert-danger form-error-alert" role="alert">{{ message }}</div>
                        {% elif level_tag == 'success' %} {# Success Level #}
                            <div class="alert alert-success" role="alert">{{ message }}</div>
                        {% elif level_tag == 'warning' %} {# Warning Level #}
                             <div class="alert alert-warning" role="alert">{{ message }}</div>
                        {% else %} {# Info or Debug Level (default) #}
                            <div class="alert alert-info" role="alert">{{ message }}</div>
                        {% endif %}
                    {% endwith %}
                {% endif %}
                {# --- End condition --- #}
            {% endfor %}
         {% endif %}
         {# --- End Message Display Block --- #}

        <form method="post" class="bg-element p-4 rounded border">
            {% csrf_token %}
            {% translate "e.g., Abdullah" as name_placeholder %}
            {% translate "e.g., user@example.com" as email_placeholder %}

            <div class="row g-3">
                {# Name #}
                <div class="col-md-6 mb-3">
                    <label for="{{ form.name.id_for_label }}" class="form-label form-label-sm">{{ form.name.label }}</label>
                    {% render_field form.name class+="form-control" placeholder=name_placeholder %}
                    {% if form.name.errors %}<div class="form-text text-danger small mt-1">{{ form.name.errors|striptags }}</div>{% endif %}
                </div>
                {# Email #}
                <div class="col-md-6 mb-3">
                    <label for="{{ form.email.id_for_label }}" class="form-label form-label-sm">{{ form.email.label }}</label>
                    {% render_field form.email class+="form-control" placeholder=email_placeholder %}
                    {% if form.email.errors %}<div class="form-text text-danger small mt-1">{{ form.email.errors|striptags }}</div>{% endif %}
                </div>
                 {# Country (Dropdown - uses django-countries now) #}
                <div class="col-md-6 mb-3">
                    <label for="{{ form.country.id_for_label }}" class="form-label form-label-sm">{{ form.country.label }}</label>
                    {# Render the form field generated by CountryField.formfield #}
                    {% render_field form.country class+="form-select" %}
                    {% if form.country.errors %}<div class="form-text text-danger small mt-1">{{ form.country.errors|striptags }}</div>{% endif %}
                 </div>
                 {# Subject (Dropdown) #}
                <div class="col-md-6 mb-3">
                    <label for="{{ form.subject.id_for_label }}" class="form-label form-label-sm">{{ form.subject.label }}</label>
                    {% render_field form.subject class+="form-select" %}
                    {% if form.subject.errors %}<div class="form-text text-danger small mt-1">{{ form.subject.errors|striptags }}</div>{% endif %}
                </div>
                {# Is Parent Checkbox - Adjusted Styling #}
               <div class="col-12 mb-3">
                   <div class="form-check form-switch rounded p-3 bg-opacity-10 bg-warning"> {# Highlighted container #}
                        {% render_field form.is_parent class+="form-check-input ms-0 me-2 float-end" role="switch" %} {# Align switch to the end #}
                        <label class="form-check-label pe-5" for="{{ form.is_parent.id_for_label }}"> {# Add padding to prevent overlap #}
                            {{ form.is_parent.label }} {# Use shorter label #}
                        </label>
                        {% if form.is_parent.errors %}<div class="form-text text-danger small mt-1">{{ form.is_parent.errors|striptags }}</div>{% endif %}
                    </div>
                </div>
                {# Message #}
                <div class="col-12 mb-3">
                    <label for="{{ form.message.id_for_label }}" class="form-label form-label-sm">{{ form.message.label }}</label>
                    {% render_field form.message class+="form-control" rows="5" %}
                    {% if form.message.errors %}<div class="form-text text-danger small mt-1">{{ form.message.errors|striptags }}</div>{% endif %}
                </div>
                {# Captcha #}
                <div class="col-12 mb-3">
                    {% render_field form.captcha %}
                    {% if form.captcha.errors %}<div class="form-text text-danger small mt-1">{{ form.captcha.errors|striptags }}</div>{% endif %}
                </div>
            </div>
            {# Submit Button #}
            <div class="d-grid mt-3">
                <button type="submit" class="btn btn-primary filter-apply-btn" title="{% translate 'Send Message' %}">
                    <span class="material-symbols-outlined" style="vertical-align: middle;">send</span>
                    <span class="ms-1">{% translate "Send Message" %}</span>
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}