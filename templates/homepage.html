{% extends "base.html" %}
{% load static %}

{% block title %}IEGS - Islamic Ethical Gaming Standard{% endblock %}

{% block content %}
  <div class="homepage-hero text-center py-5 mb-5">
      <h1 class="display-4 fw-bold">Islamic Ethical Gaming Standard</h1>
      <p class="lead col-lg-8 mx-auto text-secondary">
          Navigating video games according to the Quran & Sunnah as understood by As-Salaf. Find ratings and guidance.
      </p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mt-4">
          <a href="{% url 'ratings:game_list' %}" class="btn btn-primary btn-lg px-4 gap-3">Browse Game Ratings</a>
          <a href="{% url 'articles:article_list' %}" class="btn btn-outline-secondary btn-lg px-4">Read Articles</a>
      </div>
  </div>

  <div class="row g-5">
      {# Section for Latest Games #}
      <div class="col-md-7">
          <h2 class="pb-2 border-bottom mb-3 section-title">Latest Game Ratings</h2>
           <div class="row row-cols-1 row-cols-md-2 g-4"> {# Nested grid for cards #}
              {% if latest_games %}
                  {% for game in latest_games %}
                     <div class="col">
                         {% include 'ratings/includes/game_card_snippet.html' with game=game %}
                     </div>
                  {% endfor %}
              {% else %}
                 <p class="col-12 text-secondary">No games rated yet.</p>
              {% endif %}
           </div>
           {% if latest_games %}
           <div class="text-center mt-4">
                <a href="{% url 'ratings:game_list' %}" class="btn btn-sm btn-outline-secondary">View All Games</a>
            </div>
            {% endif %}
      </div>

      {# Section for Latest Articles #}
      <div class="col-md-5">
          <h2 class="pb-2 border-bottom mb-3 section-title">Recent Articles</h2>
          {% if latest_articles %}
              {% for article in latest_articles %}
                  <div class="article-summary mb-3">
                      <h5 class="mb-1">
                          <a href="{{ article.get_absolute_url }}" class="link-light text-decoration-none article-summary-title">{{ article.title }}</a>
                      </h5>
                      <p class="text-secondary article-summary-meta">
                          {{ article.published_date|date:"F j, Y" }}
                          {% if article.author_name %} - {{ article.author_name }}{% endif %}
                      </p>
                       <p class="article-summary-excerpt">{{ article.content|striptags|truncatewords:25 }}</p>
                  </div>
                 {% if not forloop.last %}<hr class="my-3">{% endif %} {# Divider between articles #}
              {% endfor %}
               <div class="text-center mt-4">
                    <a href="{% url 'articles:article_list' %}" class="btn btn-sm btn-outline-secondary">View All Articles</a>
                </div>
          {% else %}
              <p class="text-secondary">No articles published yet.</p>
          {% endif %}
      </div>
  </div>

{% endblock %}